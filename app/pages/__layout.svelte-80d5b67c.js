import{S as W,i as X,s as Y,e as g,t as A,k as T,c as k,a as $,h as j,d as m,m as V,b as v,g as D,F as b,n as Z,o as U,p as x,q as I,G as H,v as we,H as B,I as P,w as M,x as q,J,y as F,B as L,K as ee,L as Ee,M as te,N as le,O as ne,l as ae,P as ye,Q as Ie,R as Ne,T as Ue,U as De}from"../chunks/vendor-ead71bd5.js";import{e as se,a as re,f as K,c as ie,b as Se,t as Te,d as oe}from"../chunks/store-d6a74387.js";import{f as ue,a as ce,b as fe,S as Ve,P as Ae,s as de}from"../chunks/stringResources-e3af1336.js";import{g as Q}from"../chunks/navigation-bd39ff07.js";import{E as je}from"../chunks/edit-14e185c6.js";import"../chunks/singletons-a6a7384f.js";function Be(r){let e,n,l,s,a,t,i,u,_,f;t=new Ve({});let c=r[4]==="email-templates"&&_e(r);return{c(){e=g("div"),n=g("label"),l=g("input"),a=T(),M(t.$$.fragment),i=T(),c&&c.c(),this.h()},l(o){e=k(o,"DIV",{class:!0});var d=$(e);n=k(d,"LABEL",{for:!0,class:!0});var p=$(n);l=k(p,"INPUT",{type:!0,id:!0,name:!0,placeholder:!0}),a=V(p),q(t.$$.fragment,p),p.forEach(m),i=V(d),c&&c.l(d),d.forEach(m),this.h()},h(){v(l,"type","text"),v(l,"id","search"),v(l,"name","search"),v(l,"placeholder",s="Search "+r[4]),v(n,"for","search"),v(n,"class","svelte-1o66f25"),v(e,"class","svelte-1o66f25")},m(o,d){D(o,e,d),b(e,n),b(n,l),J(l,r[0]),b(n,a),F(t,n,null),b(e,i),c&&c.m(e,null),u=!0,_||(f=B(l,"input",r[16]),_=!0)},p(o,d){(!u||d&16&&s!==(s="Search "+o[4]))&&v(l,"placeholder",s),d&1&&l.value!==o[0]&&J(l,o[0]),o[4]==="email-templates"?c?c.p(o,d):(c=_e(o),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},i(o){u||(I(t.$$.fragment,o),u=!0)},o(o){U(t.$$.fragment,o),u=!1},d(o){o&&m(e),L(t),c&&c.d(),_=!1,f()}}}function Pe(r){let e,n,l,s,a,t,i,u,_;const f=[Le,Fe],c=[];function o(d,p){return d[4]==="follow-up-create"?0:1}return n=o(r),l=c[n]=f[n](r),{c(){e=g("div"),l.c(),s=T(),a=g("button"),t=A("create"),this.h()},l(d){e=k(d,"DIV",{class:!0});var p=$(e);l.l(p),s=V(p),a=k(p,"BUTTON",{class:!0});var w=$(a);t=j(w,"create"),w.forEach(m),p.forEach(m),this.h()},h(){v(a,"class","btn btn-action create svelte-1o66f25"),v(e,"class","svelte-1o66f25")},m(d,p){D(d,e,p),c[n].m(e,null),b(e,s),b(e,a),b(a,t),i=!0,u||(_=B(a,"click",r[8]),u=!0)},p(d,p){let w=n;n=o(d),n===w?c[n].p(d,p):(Z(),U(c[w],1,1,()=>{c[w]=null}),x(),l=c[n],l?l.p(d,p):(l=c[n]=f[n](d),l.c()),I(l,1),l.m(e,s))},i(d){i||(I(l),i=!0)},o(d){U(l),i=!1},d(d){d&&m(e),c[n].d(),u=!1,_()}}}function Oe(r){let e,n,l,s,a,t,i,u=r[5].tab==="email-follow-ups"&&pe(r);return{c(){e=g("div"),u&&u.c(),n=T(),l=g("button"),s=A("save"),this.h()},l(_){e=k(_,"DIV",{class:!0});var f=$(e);u&&u.l(f),n=V(f),l=k(f,"BUTTON",{class:!0});var c=$(l);s=j(c,"save"),c.forEach(m),f.forEach(m),this.h()},h(){v(l,"class","btn btn-action save svelte-1o66f25"),v(e,"class","header-template-edit-comp svelte-1o66f25")},m(_,f){D(_,e,f),u&&u.m(e,null),b(e,n),b(e,l),b(l,s),a=!0,t||(i=B(l,"click",r[6]),t=!0)},p(_,f){_[5].tab==="email-follow-ups"?u?(u.p(_,f),f&32&&I(u,1)):(u=pe(_),u.c(),I(u,1),u.m(e,n)):u&&(Z(),U(u,1,1,()=>{u=null}),x())},i(_){a||(I(u),a=!0)},o(_){U(u),a=!1},d(_){_&&m(e),u&&u.d(),t=!1,i()}}}function Me(r){let e,n,l,s,a,t,i,u,_;return n=new je({}),{c(){e=g("button"),M(n.$$.fragment),l=T(),s=g("span"),a=A("edit"),this.h()},l(f){e=k(f,"BUTTON",{class:!0});var c=$(e);q(n.$$.fragment,c),l=V(c),s=k(c,"SPAN",{class:!0});var o=$(s);a=j(o,"edit"),o.forEach(m),c.forEach(m),this.h()},h(){v(s,"class","svelte-1o66f25"),v(e,"class","btn btn-action edit svelte-1o66f25"),e.disabled=t=r[5].tab==="email-threads"||he(r[3].find(r[11]))},m(f,c){D(f,e,c),F(n,e,null),b(e,l),b(e,s),b(s,a),i=!0,u||(_=B(e,"click",r[12]),u=!0)},p(f,c){(!i||c&40&&t!==(t=f[5].tab==="email-threads"||he(f[3].find(f[11]))))&&(e.disabled=t)},i(f){i||(I(n.$$.fragment,f),i=!0)},o(f){U(n.$$.fragment,f),i=!1},d(f){f&&m(e),L(n),u=!1,_()}}}function qe(r){let e,n,l,s,a,t,i,u,_,f,c,o,d;return i=new Ae({}),{c(){e=g("div"),n=g("button"),l=g("span"),s=A("disable sequence"),a=T(),t=g("button"),M(i.$$.fragment),u=T(),_=g("span"),f=A("add follow-up"),this.h()},l(p){e=k(p,"DIV",{class:!0});var w=$(e);n=k(w,"BUTTON",{class:!0});var O=$(n);l=k(O,"SPAN",{class:!0});var R=$(l);s=j(R,"disable sequence"),R.forEach(m),O.forEach(m),a=V(w),t=k(w,"BUTTON",{class:!0});var C=$(t);q(i.$$.fragment,C),u=V(C),_=k(C,"SPAN",{class:!0});var G=$(_);f=j(G,"add follow-up"),G.forEach(m),C.forEach(m),w.forEach(m),this.h()},h(){v(l,"class","svelte-1o66f25"),v(n,"class","btn btn-action disable-squence svelte-1o66f25"),v(_,"class","svelte-1o66f25"),v(t,"class","btn btn-action follow-up-create svelte-1o66f25"),v(e,"class","svelte-1o66f25")},m(p,w){D(p,e,w),b(e,n),b(n,l),b(l,s),b(e,a),b(e,t),F(i,t,null),b(t,u),b(t,_),b(_,f),c=!0,o||(d=[B(n,"click",r[9]),B(t,"click",r[10])],o=!0)},p:P,i(p){c||(I(i.$$.fragment,p),c=!0)},o(p){U(i.$$.fragment,p),c=!1},d(p){p&&m(e),L(i),o=!1,Ee(d)}}}function _e(r){let e,n,l,s;return{c(){e=g("button"),n=A("create template"),this.h()},l(a){e=k(a,"BUTTON",{class:!0});var t=$(e);n=j(t,"create template"),t.forEach(m),this.h()},h(){v(e,"class","btn btn-action create svelte-1o66f25")},m(a,t){D(a,e,t),b(e,n),l||(s=B(e,"click",r[17]),l=!0)},p:P,d(a){a&&m(e),l=!1,s()}}}function Fe(r){let e,n,l,s;return{c(){e=g("label"),n=g("input"),this.h()},l(a){e=k(a,"LABEL",{for:!0,class:!0});var t=$(e);n=k(t,"INPUT",{type:!0,name:!0,id:!0,placeholder:!0}),t.forEach(m),this.h()},h(){v(n,"type","text"),v(n,"name","template-name"),v(n,"id","template-name"),v(n,"placeholder","Enter Template Name"),v(e,"for","template-name"),v(e,"class","svelte-1o66f25")},m(a,t){D(a,e,t),b(e,n),J(n,r[2]),l||(s=B(n,"input",r[15]),l=!0)},p(a,t){t&4&&n.value!==a[2]&&J(n,a[2])},i:P,o:P,d(a){a&&m(e),l=!1,s()}}}function Le(r){let e,n,l;function s(t){r[14](t)}let a={min:r[7]()};return r[1]!==void 0&&(a.value=r[1]),e=new te({props:a}),le.push(()=>ne(e,"value",s)),{c(){M(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,i){F(e,t,i),l=!0},p(t,i){const u={};!n&&i&2&&(n=!0,u.value=t[1],ee(()=>n=!1)),e.$set(u)},i(t){l||(I(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function pe(r){let e,n,l;function s(t){r[13](t)}let a={min:new Date};return r[1]!==void 0&&(a.value=r[1]),e=new te({props:a}),le.push(()=>ne(e,"value",s)),{c(){M(e.$$.fragment)},l(t){q(e.$$.fragment,t)},m(t,i){F(e,t,i),l=!0},p(t,i){const u={};!n&&i&2&&(n=!0,u.value=t[1],ee(()=>n=!1)),e.$set(u)},i(t){l||(I(e.$$.fragment,t),l=!0)},o(t){U(e.$$.fragment,t),l=!1},d(t){L(e,t)}}}function Ce(r){let e,n,l,s,a,t,i,u;const _=[qe,Me,Oe,Pe,Be],f=[];function c(o,d){return d&16&&(a=null),o[4]==="email-thread-insight"?0:o[4]==="template-view"?1:o[4]==="template-edit"?2:(a==null&&(a=!!o[4].includes("create")),a?3:4)}return t=c(r,-1),i=f[t]=_[t](r),{c(){e=g("div"),n=g("a"),l=A("prototype"),s=T(),i.c(),this.h()},l(o){e=k(o,"DIV",{class:!0});var d=$(e);n=k(d,"A",{href:!0,class:!0});var p=$(n);l=j(p,"prototype"),p.forEach(m),s=V(d),i.l(d),d.forEach(m),this.h()},h(){v(n,"href","/"),v(n,"class","svelte-1o66f25"),v(e,"class","header-root svelte-1o66f25")},m(o,d){D(o,e,d),b(e,n),b(n,l),b(e,s),f[t].m(e,null),u=!0},p(o,[d]){let p=t;t=c(o,d),t===p?f[t].p(o,d):(Z(),U(f[p],1,1,()=>{f[p]=null}),x(),i=f[t],i?i.p(o,d):(i=f[t]=_[t](o),i.c()),I(i,1),i.m(e,null))},i(o){u||(I(i),u=!0)},o(o){U(i),u=!1},d(o){o&&m(e),f[t].d()}}}function he(r){var l;if(!r)return!1;const e=Date.now();return((l=r.date)==null?void 0:l.valueOf())<e}function He(r,e,n){let l,s,a,t,i;H(r,se,h=>n(18,l=h)),H(r,re,h=>n(19,s=h)),H(r,K,h=>n(3,a=h)),H(r,ie,h=>n(4,t=h)),H(r,Se,h=>n(5,i=h));let u=new Date,_="",f="";we(()=>{if(i.tab==="email-follow-ups"){const h=a.find(N=>N.id===i.id);h&&h.date&&n(1,u=h.date)}});function c(){i.tab==="email-follow-ups"&&K.update(h=>{const N=h.findIndex(E=>E.id===i.id);return N!==-1&&(h[N].date=u),h}),n(1,u=new Date),Te.set(!0)}function o(){if(i.tab==="email-threads")return new Date;const N=a.find(E=>E.id===i.id);return N?N.date:new Date}function d(){if(t==="template-create"){if(!f)return;re.update(E=>[...E,{id:E.length,name:f}]),oe.set(!0),n(2,f="");return}const h=i.tab,N=a.length;h==="email-threads"?se.update(E=>{const y=E,S=E.findIndex(z=>z.id===i.id);return S!==-1&&y[S].followUpIds.push(N),y}):K.update(E=>{const y=E,S=E.findIndex(z=>z.id===i.id);return S!==-1&&y[S].followUpIds.push(N),y}),K.set([...a,{id:N,date:u}]),oe.set(!0)}function p(h){if(!h){ue.set(a),ce.set(l),fe.set(s);return}switch(t){case"email-follow-ups":const N=a.filter(y=>y.receipents.find(S=>S.includes(h))||y.status.includes(h)||l.find(S=>S.followUpIds.includes(y.id)&&(S.from.includes(h)||S.fromMail.includes(h)||S.subject.includes(h))));if(!N.length)return;ue.set(N);break;case"email-templates":const E=s.filter(y=>y.name.includes(h));if(!E.length)return;fe.set(E);break;default:ce.set(l.filter(y=>y.from.includes(h)||y.fromMail.includes(h)||y.subject.includes(h)));break}}const w=()=>Q("/"),O=()=>Q(`/${i.tab}/${i.id}/create`),R=h=>h.id===i.id,C=()=>Q(`/${i.tab}/${i.id}/edit`);function G(h){u=h,n(1,u)}function be(h){u=h,n(1,u)}function ge(){f=this.value,n(2,f)}function ke(){_=this.value,n(0,_)}const $e=()=>Q("/email-templates/create");return r.$$.update=()=>{r.$$.dirty&1&&p(_)},[_,u,f,a,t,i,c,o,d,w,O,R,C,G,be,ge,ke,$e]}class Re extends W{constructor(e){super();X(this,e,He,Ce,Y,{})}}function me(r,e,n){const l=r.slice();return l[1]=e[n],l}function Ge(r){let e,n=r[1].text+"",l;return{c(){e=g("a"),l=A(n),this.h()},l(s){e=k(s,"A",{href:!0,class:!0});var a=$(e);l=j(a,n),a.forEach(m),this.h()},h(){v(e,"href",r[1].link),v(e,"class","svelte-1tj6x9v")},m(s,a){D(s,e,a),b(e,l)},p:P,d(s){s&&m(e)}}}function Je(r){let e,n=r[1].text+"",l;return{c(){e=g("a"),l=A(n),this.h()},l(s){e=k(s,"A",{href:!0,class:!0});var a=$(e);l=j(a,n),a.forEach(m),this.h()},h(){v(e,"href",r[1].link),v(e,"class","active svelte-1tj6x9v")},m(s,a){D(s,e,a),b(e,l)},p:P,d(s){s&&m(e)}}}function ve(r){let e;function n(a,t){return a[1].key==a[0]?Je:Ge}let l=n(r),s=l(r);return{c(){s.c(),e=ae()},l(a){s.l(a),e=ae()},m(a,t){s.m(a,t),D(a,e,t)},p(a,t){l===(l=n(a))&&s?s.p(a,t):(s.d(1),s=l(a),s&&(s.c(),s.m(e.parentNode,e)))},d(a){s.d(a),a&&m(e)}}}function Ke(r){let e,n=de.components.sidenav.links,l=[];for(let s=0;s<n.length;s+=1)l[s]=ve(me(r,n,s));return{c(){e=g("div");for(let s=0;s<l.length;s+=1)l[s].c();this.h()},l(s){e=k(s,"DIV",{class:!0});var a=$(e);for(let t=0;t<l.length;t+=1)l[t].l(a);a.forEach(m),this.h()},h(){v(e,"class","svelte-1tj6x9v")},m(s,a){D(s,e,a);for(let t=0;t<l.length;t+=1)l[t].m(e,null)},p(s,[a]){if(a&1){n=de.components.sidenav.links;let t;for(t=0;t<n.length;t+=1){const i=me(s,n,t);l[t]?l[t].p(i,a):(l[t]=ve(i),l[t].c(),l[t].m(e,null))}for(;t<l.length;t+=1)l[t].d(1);l.length=n.length}},i:P,o:P,d(s){s&&m(e),ye(l,s)}}}function Qe(r,e,n){let l;return H(r,ie,s=>n(0,l=s)),[l]}class ze extends W{constructor(e){super();X(this,e,Qe,Ke,Y,{})}}function We(r){let e,n,l,s,a,t,i,u,_;l=new ze({}),t=new Re({});const f=r[1].default,c=Ie(f,r,r[0],null);return{c(){e=g("div"),n=g("nav"),M(l.$$.fragment),s=T(),a=g("div"),M(t.$$.fragment),i=T(),u=g("main"),c&&c.c(),this.h()},l(o){e=k(o,"DIV",{class:!0});var d=$(e);n=k(d,"NAV",{});var p=$(n);q(l.$$.fragment,p),p.forEach(m),s=V(d),a=k(d,"DIV",{class:!0});var w=$(a);q(t.$$.fragment,w),i=V(w),u=k(w,"MAIN",{});var O=$(u);c&&c.l(O),O.forEach(m),w.forEach(m),d.forEach(m),this.h()},h(){v(a,"class","root"),v(e,"class","app")},m(o,d){D(o,e,d),b(e,n),F(l,n,null),b(e,s),b(e,a),F(t,a,null),b(a,i),b(a,u),c&&c.m(u,null),_=!0},p(o,[d]){c&&c.p&&(!_||d&1)&&Ne(c,f,o,o[0],_?De(f,o[0],d,null):Ue(o[0]),null)},i(o){_||(I(l.$$.fragment,o),I(t.$$.fragment,o),I(c,o),_=!0)},o(o){U(l.$$.fragment,o),U(t.$$.fragment,o),U(c,o),_=!1},d(o){o&&m(e),L(l),L(t),c&&c.d(o)}}}function Xe(r,e,n){let{$$slots:l={},$$scope:s}=e;return r.$$set=a=>{"$$scope"in a&&n(0,s=a.$$scope)},[s,l]}class nt extends W{constructor(e){super();X(this,e,Xe,We,Y,{})}}export{nt as default};
