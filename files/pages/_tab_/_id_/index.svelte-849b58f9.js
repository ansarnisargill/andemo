import{S as Ne,i as Se,s as $e,e as p,k as y,t as G,w as le,c as b,a as k,d as _,m as B,h as H,x as se,b as m,X as _e,g as K,F as c,y as ae,H as ne,q as D,a0 as oe,j as W,o as M,B as ie,L as Ie,p as he,l as Y,f as ye,I as Be,P as me,G as ge,v as Oe,n as pe}from"../../../chunks/vendor-ead71bd5.js";import{g as Z}from"../../../chunks/navigation-bd39ff07.js";import{b as Pe,c as De,f as Fe,e as Le}from"../../../chunks/store-d6a74387.js";import{E as be}from"../../../chunks/eye-215ab4ab.js";import{E as Ve}from"../../../chunks/edit-14e185c6.js";import"../../../chunks/singletons-a6a7384f.js";function ke(a,t,n){const e=a.slice();return e[11]=t[n],e}function Ee(a,t,n){const e=a.slice();return e[14]=t[n],e}function we(a){let t,n,e,s,o,l,f,E=a[0].subject+"",S,U,w,j=a[0].from+"",$,r,g,O=a[0].fromMail+"",V,X,N,h,T,P,F,z,I,A,ee,re,C=a[1],u=[];for(let i=0;i<C.length;i+=1)u[i]=qe(Ee(a,C,i));const je=i=>M(u[i],1,1,()=>{u[i]=null});h=new be({});let q=a[1].length&&Ue(a);return{c(){t=p("div"),n=p("section"),e=p("ul");for(let i=0;i<u.length;i+=1)u[i].c();s=y(),o=p("section"),l=p("div"),f=p("p"),S=G(E),U=y(),w=p("p"),$=G(j),r=y(),g=p("p"),V=G(O),X=y(),N=p("button"),le(h.$$.fragment),T=y(),P=p("span"),F=G("view"),z=y(),I=p("ul"),q&&q.c(),this.h()},l(i){t=b(i,"DIV",{class:!0});var d=k(t);n=b(d,"SECTION",{class:!0,"data-no-content":!0});var v=k(n);e=b(v,"UL",{class:!0});var J=k(e);for(let te=0;te<u.length;te+=1)u[te].l(J);J.forEach(_),v.forEach(_),s=B(d),o=b(d,"SECTION",{class:!0});var Q=k(o);l=b(Q,"DIV",{class:!0});var L=k(l);f=b(L,"P",{class:!0});var ce=k(f);S=H(ce,E),ce.forEach(_),U=B(L),w=b(L,"P",{class:!0});var fe=k(w);$=H(fe,j),fe.forEach(_),r=B(L),g=b(L,"P",{class:!0});var ue=k(g);V=H(ue,O),ue.forEach(_),X=B(L),N=b(L,"BUTTON",{class:!0});var R=k(N);se(h.$$.fragment,R),T=B(R),P=b(R,"SPAN",{class:!0});var de=k(P);F=H(de,"view"),de.forEach(_),R.forEach(_),L.forEach(_),z=B(Q),I=b(Q,"UL",{class:!0});var ve=k(I);q&&q.l(ve),ve.forEach(_),Q.forEach(_),d.forEach(_),this.h()},h(){m(e,"class","svelte-gv3v9q"),m(n,"class","follow-ups svelte-gv3v9q"),m(n,"data-no-content","No Email Follow-Ups Found"),_e(n,"no-data",!a[1].length),m(f,"class","subject svelte-gv3v9q"),m(w,"class","svelte-gv3v9q"),m(g,"class","svelte-gv3v9q"),m(P,"class","svelte-gv3v9q"),m(N,"class","svelte-gv3v9q"),m(l,"class","thread-info svelte-gv3v9q"),m(I,"class","status-info svelte-gv3v9q"),m(o,"class","info svelte-gv3v9q"),m(t,"class","thread-root svelte-gv3v9q")},m(i,d){K(i,t,d),c(t,n),c(n,e);for(let v=0;v<u.length;v+=1)u[v].m(e,null);c(t,s),c(t,o),c(o,l),c(l,f),c(f,S),c(l,U),c(l,w),c(w,$),c(l,r),c(l,g),c(g,V),c(l,X),c(l,N),ae(h,N,null),c(N,T),c(N,P),c(P,F),c(o,z),c(o,I),q&&q.m(I,null),A=!0,ee||(re=ne(N,"click",a[7]),ee=!0)},p(i,d){if(d&2){C=i[1];let v;for(v=0;v<C.length;v+=1){const J=Ee(i,C,v);u[v]?(u[v].p(J,d),D(u[v],1)):(u[v]=qe(J),u[v].c(),D(u[v],1),u[v].m(e,null))}for(pe(),v=C.length;v<u.length;v+=1)je(v);he()}d&2&&_e(n,"no-data",!i[1].length),(!A||d&1)&&E!==(E=i[0].subject+"")&&W(S,E),(!A||d&1)&&j!==(j=i[0].from+"")&&W($,j),(!A||d&1)&&O!==(O=i[0].fromMail+"")&&W(V,O),i[1].length?q?q.p(i,d):(q=Ue(i),q.c(),q.m(I,null)):q&&(q.d(1),q=null)},i(i){if(!A){for(let d=0;d<C.length;d+=1)D(u[d]);D(h.$$.fragment,i),A=!0}},o(i){u=u.filter(Boolean);for(let d=0;d<u.length;d+=1)M(u[d]);M(h.$$.fragment,i),A=!1},d(i){i&&_(t),me(u,i),ie(h),q&&q.d(),ee=!1,re()}}}function qe(a){let t,n,e=a[14].date.toString().slice(0,24)+"",s,o,l,f,E,S,U,w,j,$,r,g,O,V;E=new be({});function X(){return a[5](a[14])}w=new Ve({});function N(){return a[6](a[14])}return{c(){t=p("li"),n=p("p"),s=G(e),o=y(),l=p("div"),f=p("button"),le(E.$$.fragment),S=y(),U=p("button"),le(w.$$.fragment),$=y(),this.h()},l(h){t=b(h,"LI",{class:!0});var T=k(t);n=b(T,"P",{class:!0});var P=k(n);s=H(P,e),P.forEach(_),o=B(T),l=b(T,"DIV",{class:!0});var F=k(l);f=b(F,"BUTTON",{class:!0});var z=k(f);se(E.$$.fragment,z),z.forEach(_),S=B(F),U=b(F,"BUTTON",{class:!0});var I=k(U);se(w.$$.fragment,I),I.forEach(_),F.forEach(_),$=B(T),T.forEach(_),this.h()},h(){m(n,"class","svelte-gv3v9q"),m(f,"class","view svelte-gv3v9q"),m(U,"class","edit svelte-gv3v9q"),U.disabled=j=x(a[14])==="sent",m(l,"class","svelte-gv3v9q"),m(t,"class",r=""+(oe(x(a[14]))+" svelte-gv3v9q"))},m(h,T){K(h,t,T),c(t,n),c(n,s),c(t,o),c(t,l),c(l,f),ae(E,f,null),c(l,S),c(l,U),ae(w,U,null),c(t,$),g=!0,O||(V=[ne(f,"click",X),ne(U,"click",N)],O=!0)},p(h,T){a=h,(!g||T&2)&&e!==(e=a[14].date.toString().slice(0,24)+"")&&W(s,e),(!g||T&2&&j!==(j=x(a[14])==="sent"))&&(U.disabled=j),(!g||T&2&&r!==(r=""+(oe(x(a[14]))+" svelte-gv3v9q")))&&m(t,"class",r)},i(h){g||(D(E.$$.fragment,h),D(w.$$.fragment,h),g=!0)},o(h){M(E.$$.fragment,h),M(w.$$.fragment,h),g=!1},d(h){h&&_(t),ie(E),ie(w),O=!1,Ie(V)}}}function Ue(a){let t,n=a[2],e=[];for(let s=0;s<n.length;s+=1)e[s]=Te(ke(a,n,s));return{c(){for(let s=0;s<e.length;s+=1)e[s].c();t=Y()},l(s){for(let o=0;o<e.length;o+=1)e[o].l(s);t=Y()},m(s,o){for(let l=0;l<e.length;l+=1)e[l].m(s,o);K(s,t,o)},p(s,o){if(o&4){n=s[2];let l;for(l=0;l<n.length;l+=1){const f=ke(s,n,l);e[l]?e[l].p(f,o):(e[l]=Te(f),e[l].c(),e[l].m(t.parentNode,t))}for(;l<e.length;l+=1)e[l].d(1);e.length=n.length}},d(s){me(e,s),s&&_(t)}}}function Te(a){let t,n=a[11]+"",e,s,o;return{c(){t=p("li"),e=G(n),s=y(),this.h()},l(l){t=b(l,"LI",{class:!0,style:!0});var f=k(t);e=H(f,n),s=B(f),f.forEach(_),this.h()},h(){m(t,"class",o=""+(oe(a[11])+" svelte-gv3v9q")),ye(t,"text-transform","capitalize")},m(l,f){K(l,t,f),c(t,e),c(t,s)},p:Be,d(l){l&&_(t)}}}function Ae(a){let t,n,e=a[0]&&we(a);return{c(){e&&e.c(),t=Y()},l(s){e&&e.l(s),t=Y()},m(s,o){e&&e.m(s,o),K(s,t,o),n=!0},p(s,[o]){s[0]?e?(e.p(s,o),o&1&&D(e,1)):(e=we(s),e.c(),D(e,1),e.m(t.parentNode,t)):e&&(pe(),M(e,1,1,()=>{e=null}),he())},i(s){n||(D(e),n=!0)},o(s){M(e),n=!1},d(s){e&&e.d(s),s&&_(t)}}}async function Ke({params:a}){const t=a.tab,n=Number(a.id);return{props:{tab:t,id:n}}}function x(a){var e;const t=Date.now();return((e=a.date)==null?void 0:e.valueOf())<t?"sent":a.status}function Ce(a,t,n){let e,s;ge(a,Fe,r=>n(8,e=r)),ge(a,Le,r=>n(9,s=r));let{tab:o}=t,{id:l}=t,f,E=[];const S=["upcoming","disabled","replied","sent"];Oe(()=>{(o!=="email-threads"||l&&!s.find(r=>r.id===l))&&Z("/"),Pe.set({tab:o,id:l}),De.set("email-thread-insight"),n(0,f=s.find(r=>r.id===l)),n(1,E=U())});function U(){return f.followUpIds.map(r=>e.find(g=>g.id===r)).sort((r,g)=>r.date<g.date?-1:1).filter(r=>r)}const w=r=>Z(`/email-follow-ups/${r.id}/view`),j=r=>Z(`/email-follow-ups/${r.id}/edit`),$=()=>Z(`/email-threads/${f.id}/view`);return a.$$set=r=>{"tab"in r&&n(3,o=r.tab),"id"in r&&n(4,l=r.id)},[f,E,S,o,l,w,j,$]}class Qe extends Ne{constructor(t){super();Se(this,t,Ce,Ae,$e,{tab:3,id:4})}}export{Qe as default,Ke as load};
